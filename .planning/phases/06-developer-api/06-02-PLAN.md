---
phase: 06-developer-api
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/SCHEMA_DEVELOPER_API.md
autonomous: true

must_haves:
  truths:
    - "Documentation exists explaining how to extend the schema system"
    - "Developer can understand how to register custom schema types from documentation"
    - "Developer can understand how to modify existing schemas from documentation"
  artifacts:
    - path: "docs/SCHEMA_DEVELOPER_API.md"
      provides: "Complete developer API documentation"
      min_lines: 300
      contains: "saman_seo_register_schema_type"
  key_links:
    - from: "docs/SCHEMA_DEVELOPER_API.md"
      to: "includes/Schema/class-abstract-schema.php"
      via: "documents Abstract_Schema interface"
      pattern: "Abstract_Schema"
    - from: "docs/SCHEMA_DEVELOPER_API.md"
      to: "includes/Schema/class-schema-registry.php"
      via: "documents Schema_Registry methods"
      pattern: "Schema_Registry"
---

<objective>
Create comprehensive developer documentation for the Schema Developer API.

Purpose: Enable third-party developers to understand and use the schema extension system without reading source code.

Output: A complete `docs/SCHEMA_DEVELOPER_API.md` file following the existing docs/FILTERS.md pattern.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/06-developer-api/06-RESEARCH.md

# Reference for documentation style
@docs/FILTERS.md
@docs/DEVELOPER_GUIDE.md

# Classes to document
@includes/Schema/class-schema-registry.php
@includes/Schema/class-abstract-schema.php
@includes/Schema/class-schema-context.php
@includes/Schema/class-schema-ids.php
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SCHEMA_DEVELOPER_API.md documentation</name>
  <files>docs/SCHEMA_DEVELOPER_API.md</files>
  <action>
Create comprehensive developer documentation following the structure from RESEARCH.md and matching the style of existing docs/FILTERS.md.

Document the following sections:

1. **Overview**
   - What the Schema Developer API enables
   - When to use each hook type
   - Brief architecture overview (Registry -> Graph Manager -> Output)

2. **Registering Custom Schema Types**
   - `saman_seo_register_schema_type` action hook
   - Complete example of a custom Event schema class
   - Registration options (label, post_types, priority)
   - When to use vs modifying existing schemas

3. **Modifying Existing Schemas**
   - `saman_seo_schema_{type}_fields` filter for pre-generation modification
   - `saman_seo_schema_{type}_output` filter for post-generation modification
   - Examples: adding speakable to Article, adding custom fields

4. **Filtering Available Types**
   - `saman_seo_schema_types` filter
   - Examples: removing types, changing labels

5. **API Reference**
   - Schema_Registry public methods (instance, register, get_types, has, make, get)
   - Abstract_Schema interface (is_needed, generate, get_type, get_id, apply_fields_filter)
   - Schema_Context properties (canonical, site_url, site_name, post, post_type, meta, schema_type)
   - Schema_IDs helper methods (website, organization, person, webpage, article, breadcrumb, localbusiness)

6. **Complete Examples**
   - Full custom schema type with registration
   - Modifying Article schema with speakable
   - Removing schema types from dropdown
   - Conditional schema based on post meta

7. **Troubleshooting**
   - Common pitfalls from RESEARCH.md
   - Registration timing issues
   - @context duplication
   - Missing is_needed() implementation
   - Breaking schema graph
   - Namespace collisions

8. **Related Documentation**
   - Links to FILTERS.md, DEVELOPER_GUIDE.md

Follow the formatting conventions from FILTERS.md:
- Use `###` for hook names
- Include Parameters, File location, Examples sections
- Use fenced code blocks with php language tag
- Include practical, real-world examples
  </action>
  <verify>
Check file exists and has substantial content: `wc -l docs/SCHEMA_DEVELOPER_API.md` should show 300+ lines.
Grep for key sections: "Registering Custom Schema Types", "API Reference", "Troubleshooting".
Verify markdown syntax is valid.
  </verify>
  <done>
docs/SCHEMA_DEVELOPER_API.md exists with complete documentation covering all Schema Developer API features.
  </done>
</task>

<task type="auto">
  <name>Task 2: Update DEVELOPER_GUIDE.md with reference to new docs</name>
  <files>docs/DEVELOPER_GUIDE.md</files>
  <action>
Add a reference to the new SCHEMA_DEVELOPER_API.md in the Related Documentation or See Also section of DEVELOPER_GUIDE.md.

If a "Related Documentation" section exists, add:
```markdown
- **[Schema Developer API](SCHEMA_DEVELOPER_API.md)** - Extending the JSON-LD schema system
```

If no such section exists, add one at the end:
```markdown
## Related Documentation

- **[Schema Developer API](SCHEMA_DEVELOPER_API.md)** - Extending the JSON-LD schema system with custom types and modifications
- **[Filter Reference](FILTERS.md)** - Complete filter hooks reference
```

This cross-links the documentation for discoverability.
  </action>
  <verify>
Grep DEVELOPER_GUIDE.md for "SCHEMA_DEVELOPER_API" to confirm the link was added.
  </verify>
  <done>
DEVELOPER_GUIDE.md links to SCHEMA_DEVELOPER_API.md for cross-reference.
  </done>
</task>

</tasks>

<verification>
1. `docs/SCHEMA_DEVELOPER_API.md` exists with 300+ lines
2. Documentation covers all 5 requirements (DEV-01 through DEV-05 mentioned)
3. Documentation follows existing FILTERS.md style conventions
4. DEVELOPER_GUIDE.md references the new documentation
5. All code examples are syntactically valid PHP
</verification>

<success_criteria>
- SCHEMA_DEVELOPER_API.md has overview, registration, modification, filtering, API reference, examples, and troubleshooting sections
- All four public hooks are documented (register action, fields filter, output filter, types filter)
- Complete working examples for common use cases
- Cross-linked from DEVELOPER_GUIDE.md
</success_criteria>

<output>
After completion, create `.planning/phases/06-developer-api/06-02-SUMMARY.md`
</output>
