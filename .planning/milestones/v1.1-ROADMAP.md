# Milestone v1.1: WooCommerce Product Schemas

**Status:** âœ… SHIPPED 2026-01-24
**Phases:** 7-10
**Total Plans:** 5

## Overview

Enable Product rich results in Google search for WooCommerce stores with price, availability, images, and review ratings.

## Phases

### Phase 7: Foundation
**Goal**: Establish WooCommerce integration foundation with proper schema conflict prevention
**Depends on**: Phase 6 (v1.0 complete)
**Requirements**: INTG-01, INTG-02, INTG-03, INTG-04
**Success Criteria** (what must be TRUE):
  1. WooCommerce native JSON-LD schema is disabled when plugin is active
  2. Product schema only appears on single product pages, not on shop/category archives
  3. Product schema auto-registers in Schema_Registry when WooCommerce is detected
  4. Product_Schema class extends Abstract_Schema and integrates with Schema_Graph_Manager
**Plans**: 1 plan

Plans:
- [x] 07-01-PLAN.md - Disable WC native schema, create Product_Schema skeleton, extend Schema_IDs

### Phase 8: Simple Products
**Goal**: Complete Product schema output for simple products with single Offer
**Depends on**: Phase 7
**Requirements**: PROD-01, PROD-02, PROD-03, PROD-04, PROD-05, PROD-06, PROD-07, PROD-08, OFFR-01, OFFR-02, OFFR-03, OFFR-06
**Success Criteria** (what must be TRUE):
  1. Simple product pages output valid Product schema with name, description, image, sku, url
  2. Product schema includes brand from product attribute or global fallback setting
  3. Product schema includes gtin/mpn when custom fields are populated
  4. Simple products output single Offer with price, priceCurrency, availability, and seller
  5. Offer availability correctly reflects WooCommerce stock status (InStock/OutOfStock/PreOrder)
**Plans**: 2 plans

Plans:
- [x] 08-01-PLAN.md - Product core properties (description, images, sku, brand, identifiers, condition)
- [x] 08-02-PLAN.md - Offer building (price, availability, priceValidUntil, seller)

### Phase 9: Variable Products
**Goal**: AggregateOffer support for variable products with price ranges
**Depends on**: Phase 8
**Requirements**: OFFR-04, OFFR-05
**Success Criteria** (what must be TRUE):
  1. Variable products output AggregateOffer instead of single Offer
  2. AggregateOffer includes lowPrice/highPrice from variation price range
  3. AggregateOffer availability shows InStock if ANY variation is in stock
**Plans**: 1 plan

Plans:
- [x] 09-01-PLAN.md - AggregateOffer with lowPrice/highPrice and child_is_in_stock availability

### Phase 10: Reviews & Ratings
**Goal**: AggregateRating and Review schema from WooCommerce reviews
**Depends on**: Phase 8
**Requirements**: REVW-01, REVW-02, REVW-03, REVW-04, REVW-05, REVW-06
**Success Criteria** (what must be TRUE):
  1. Products with reviews output AggregateRating with correct ratingValue and reviewCount
  2. Products with zero reviews do NOT output AggregateRating property
  3. Product schema outputs Review array with individual customer reviews
  4. Each Review includes author, reviewRating, reviewBody, and datePublished
**Plans**: 1 plan

Plans:
- [x] 10-01-PLAN.md - AggregateRating and Review schema from WooCommerce reviews

---

## Milestone Summary

**Key Decisions:**

- AggregateOffer approach for variable products (not ProductGroup)
- Disable WC native schema at init priority 0 (earliest reliable hook)
- Only output on is_singular('product')
- Product schema priority 16 (after Article at 15)
- itemCondition uses full URL format (https://schema.org/NewCondition)
- Default condition is NewCondition (most WC products are new)
- Brand fallback: meta > attribute > global option
- Use get_price() for active price (handles sale price automatically)
- Skip offers entirely if price is zero/empty
- onbackorder maps to PreOrder (Google-recommended)
- Seller only added when Organization type is active
- Omit priceValidUntil from AggregateOffer (variations have different dates)
- Omit seller from AggregateOffer (not standard practice)
- offerCount uses count(get_children()) for variation count
- reviewCount over ratingCount (Google preference when reviews exist)
- Limit to 10 reviews for performance
- Skip reviews with invalid rating or missing author

**Issues Resolved:**

- WC native schema conflict (disabled at earliest hook)
- Archive page schema output (strict is_singular check)
- Invalid price handling (skip offers if zero/empty)
- Backorder mapping (PreOrder per Google guidelines)

**Issues Deferred:**

- ProductGroup pattern for variable products (future enhancement)
- Per-variation images (future enhancement)
- Multi-currency support (documented as limitation)

**Technical Debt Incurred:**

None - clean implementation following established patterns.

---

*For current project status, see .planning/ROADMAP.md*
